#!/usr/bin/emacs --script

; Tangle config files written in org format. Output dotfiles are saved to
; /tmp/tangle-$USER and dependency installation scripts are saved to
; /tmp/dependencies-$USER. If this script is not running in a docker container, the
; files will be deleted.

(setq tangle-home (concat "/tmp/tangle-" (user-login-name)))

(shell-command (concat "rm -rf " tangle-home))

(require 'ob-tangle)

(org-babel-tangle-file "~/README.org")
(org-babel-tangle-file "~/.shells.org")
(org-babel-tangle-file "~/.emacs.d/haris-config.org")
(org-babel-tangle-file "~/.config/i3.org")

(shell-command (concat "rsync -rvu " tangle-home " ~/"))

; vim: filetype=lisp
