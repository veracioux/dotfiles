#!/usr/bin/emacs --script

(setq inside-docker (file-exists-p "/.dockerenv"))

(shell-command "rm -rf /tmp/.tangle-home")

(require 'ob-tangle)

(org-babel-tangle-file "~/README.org")
(org-babel-tangle-file "~/.shells.org")
(org-babel-tangle-file "~/.emacs.d/haris-config.org")
(org-babel-tangle-file "~/.config/i3.org")

(if (not inside-docker)
    (progn (shell-command "rsync -rvu /tmp/.tangle-home ~/")
           (shell-command "rm -rf /tmp/.tangle-home")))

; vim: filetype=lisp
