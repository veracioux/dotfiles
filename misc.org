#+TITLE: Miscellaneous configs
#+SETUPFILE: .setup.org

* Docker
#+begin_src json :tangle ~/.docker/config.json
  {
    "experimental": "enabled",
    "credsStore": "pass",
    "aliases": {
      "builder": "buildx"
    }
  }
#+end_src
* SSH
#+begin_src ssh-config :tangle ~/.ssh/config
  Include conf.d/*.conf

  Match all
    AddKeysToAgent yes
    IdentityFile ~/.ssh/main
    RequestTTY yes
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 600
    SetEnv TERM=xterm-256color
#+end_src
* Dunst
:PROPERTIES:
:header-args+: :tangle ~/.config/dunst/dunstrc
:END:
#+begin_src conf
  # vim: ft=cfg
  [global]
  follow                  = mouse
  width                   = (50, 300)
  height                  = 400
  origin                  = top-right
  indicate_hidden         = yes
  shrink                  = no            # Shrink window if smaller than width.

  transparency            = 20            # Range: [0, 100]
  separator_height        = 2
  padding                 = 8
  horizontal_padding      = 8
  frame_width             = 1
  frame_color             = "#99a3ff"
  separator_color         = auto
  corner_radius           = 5

  sort                    = yes           # Sort messages by urgency.
  idle_threshold          = 30
#+end_src
** Text
#+begin_src conf
  font                    = Monospace 11
  line_height             = 4
  markup                  = full
  format                  = "<b>%s</b>\n%b"
  alignment               = left
  vertical_alignment      = center
  show_age_threshold      = 60
  word_wrap               = yes
  ellipsize               = middle
  ignore_newline          = no
  stack_duplicates        = true
  hide_duplicate_count    = false
  show_indicators         = yes
#+end_src
** Icons
#+begin_src conf
  icon_position           = left
  min_icon_size           = 0
  max_icon_size           = 32
#+end_src
** History
#+begin_src conf
  sticky_history          = yes
  history_length          = 20
#+end_src
** Misc/advanced
#+begin_src conf
  browser                 = /usr/bin/firefox --new-tab

  always_run_script       = true
  title                   = Dunst
  class                   = Dunst
  force_xinerama          = false
  ignore_dbusclose        = false

  mouse_left_click        = do_action, close_current
  mouse_right_click       = close_all

  [urgency_low]
  background              = "#222222"
  foreground              = "#888888"
  timeout                 = 3

  [urgency_normal]
  background              = "#1e1e1e"
  foreground              = "#99a3ff"
  timeout                 = 10

  [urgency_critical]
  background              = "#1e1e1e"
  foreground              = "#ff8c8c"
  frame_color             = "#ff8c8c"
  timeout                 = 20
#+end_src
* Backup
#+begin_src shell :tangle ~/.local/bin/backup
  _ls() {
      ls -d "$@" || true
  }

  files() {
      git --git-dir ~/.git --work-tree ~ ls-files
      _ls ~/.git
      _ls ~/.password-store/
      _ls ~/.ssh/
      _ls ~/.gnupg/
      _ls ~/.local/share/fish/fish_history*
      _ls ~/.local/share/buku/
      _ls ~/.local/share/opencode/
      _ls ~/.config/fish/private.fish
  }

  exclude() {
      grep --fixed-strings                        \
           -ve /node_modules/                     \
           -ve /_node_modules/                    \
           -ve /.venv/                            \
           -ve /.pnpm-store/                      \
           -ve /__pycache__/                      \
           -ve /.pytest_cache/                    \
           -ve /.tox/                             \
           -ve /.mypy_cache/                      \
           -ve /.bower/                           \
           -ve /.next/                            \
           -ve /.nuxt/                            \
           -ve /dist/                             \
           -ve /build/                            \
           -ve /out/                              \
           -ve /target/                           \
           -ve /log/                              \
           -ve /logs/                             \
          | grep                                  \
                -ve '/\.Trash.*/'                 \
                -ve '.*\.DS_Store$'               \
                -ve '.*\.log$'                    \
                -ve '.*\.swp$'                    \
                -ve '.*\.swo$'                    \
                -ve '.*\.~$'
  }

  files | exclude
#+end_src
* IdeaVim
#+begin_src vimrc :tangle ~/.ideavimrc
  set surround
#+end_src
